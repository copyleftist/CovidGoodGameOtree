{% extends "global/Page.html" %}

{% block content %}
    {#content#}
    <div class="container fade-in-var" style="display:none; --time: 0.2s" id="main">
        <div class="row">
            <div class="col">
                <div style="margin-left: 35%;color: gray;font-weight: bolder;">You <br> ↙</div>
                <div class="box" style="float: left">
                    <img src="{% static player_character %}">
                    <div class="text-centered">{{ player_multiplier }}</div>
                </div>
            </div>
            <div class="col">
                <div style="margin-left: 55%;color: gray;font-weight: bolder;">Other player<br> ↘</div>
                <div class="box" style="float: right">
                    <img style="-webkit-transform: scaleX(-1);transform: scaleX(-1);" src="{% static opp_character %}">
                    <div style="left: 6%" class="text-centered">{{ opp_multiplier }}</div>
                </div>
            </div>
        </div>
        </br>
        </br>
        </br>
        </br>
    </div>
{#        <p style="text-align: center; font-size: larger">#}
        <div id="results" class="fade-in-var" style="display: none; border-bottom: black; --time: 1s">
            <h2 style="border-bottom: dashed black">RESULTS</h3><br>

                <h4>CONTRIBUTION = <b>{{ player.contribution }}</b></h4>
                <h4>OTHER PLAYER CONTRIBUTION = <b>{{ opp_contribution }}</b></h4>

                <h4>IND. SHARE = (({{ player.contribution }} x <b
                        style="color: {{ player_color }}">{{ player_multiplier }}</b>)
                    +
                    ({{ opp_contribution }} x <b style="color: {{ opp_color }}">{{ opp_multiplier }}</b>)) / 2  = <b>{{ group.individual_share }} </b></h4>
                <br>
                <h4>POINTS LEFT = <b>{{ player_left }}</b></h4>
                <h3 >REWARD = IND. SHARE + POINTS LEFT = <b>{{ player.reward }}</b></h3>
        </div>
    <br>
    <br>
{#        <div id="results-detailed" class="row fade-in-var" style="display: none; --time: 1s">#}
{#            <div style="border-bottom: dashed black">#}
{#                <h2>Detailed Results</h2>#}
{#            </div><br>#}
{#            <div class="col">#}
{#                <br>#}
{#                <h4>You</h4>#}
{#                reward = {{ player.payoff }} <br>#}
{#                contribution = {{ player.contribution }} x <b#}
{#                    style="color: {{ player_color }}">{{ player_multiplier }}</b><br>#}
{#                points left = {{ player_left }}#}
{#                individual share = {{ group.individual_share }}#}
{#                #}
{##}
{#            </div>#}
{#            <div class="col">#}
{#                <br>#}
{#                <h4>Other player</h4>#}
{#                reward = {{ opp_payoff }} <br>#}
{#                contribution = {{ opp_contribution }} x <b style="color: {{ opp_color }}">{{ opp_multiplier }}</b><br>#}
{#                points left = {{ opp_left }}#}
{##}
{#            </div>#}


            <br>
            <br>

            </br>

        </div>

    <script>

        $(document).ready(function () {
            setTimeout(function () {
                $('.container').show();
                $('#results').show();
            }, 800);
            setTimeout(function () {
                $('#results-detailed').show();
            }, 2000);
            let startTime = Date.now();
            let timeLimit = {{ resultsTime }};
            setInterval(function () {
                if ((Date.now() - startTime) > timeLimit) {
                    {#$('#main').fadeOut(140);#}
                    {#$('#form').submit();#}
                }
            }, 1500);

        });

        {#function liveRecv(data) {#}
        {#        if (data===true) {#}
        {#console.log('RT = ' + RT);#}
        {#console.log('contribution = ' + contribution);#}
        {#$('#RT').val(RT);#}
        {#$('#disclose').val(disclose);#}
        {#$('#main').fadeOut(140);#}
        {#$('#form').submit();}}#}

    </script>

    {#content#}

{% endblock %}
